# Что такое Props Drilling и как его избежать? # 

Props Drilling (поточность) — это концепция, которая относится к процессу передачи данных от родительского компонента точному дочернему компоненту, ***НО*** между ними, другие компоненты, владеющие реквизитами, просто передают их по цепочке.

Шаги, чтобы избежать этого

1. React Context API.
2. Composition
3. Render props
4. HOC
5. Redux or MobX

# Какова реальная причина проблем с производительностью в React Native? #
Настоящая причина проблем с производительностью React Native заключается в том, что каждый поток (то есть поток Native и JS) невероятно быстр. Узкое место в производительности приложения React Native возникает, когда вы передаете компоненты из одного потока в другой без необходимости или в большем количестве, чем требуется. Главное правило, позволяющее избежать каких-либо проблем, связанных с производительностью в React Native, — свести количество проходов через мост к минимуму.

1. Собственный поток, созданный для запуска Java/Kotlin, Swift/Objective C.
2. Поток Javascript — это основной поток, который запускает все: от анимации на основе JavaScript до других компонентов пользовательского интерфейса.
3. Мост, как следует из названия, действует как промежуточная точка связи для собственного потока и потока JS.

# Перечислите некоторые шаги по оптимизации приложения. #

1. Используйте Proguard, чтобы минимизировать размер приложения. (Это делается путем удаления частей байт-кода React Native Java (и его зависимостей), которые ваше приложение не использует)
2. Создавайте APK-файлы уменьшенного размера для определенных архитектур ЦП. Когда вы это сделаете, пользователи вашего приложения автоматически получат соответствующий APK-файл для конкретной архитектуры своего телефона. Это устраняет необходимость хранить двоичные файлы АОcore, поддерживающие несколько архитектур, и, следовательно, уменьшает размер приложения.
3. Сжимайте изображения и другие графические элементы. Другой вариант уменьшения размера изображения — использование таких типов файлов, как APNG, вместо файлов PNG.
4. Не храните необработанные данные JSON: нам нужно либо сжать их, либо преобразовать в статические идентификаторы объектов.
5. Оптимизируйте собственные библиотеки.
6. Оптимизируйте количество операций с состоянием и не забывайте при необходимости использовать pure и memoized компоненты.
7. Используйте Global State с умом, например, наихудший сценарий — это когда изменение состояния одного элемента управления, такого как TextInput или CheckBox, распространяется на рендеринг всего приложения. Используйте такие библиотеки, как Redux или Overmind.js, чтобы более оптимизировать управление состоянием.
8. Используйте ключевой атрибут для элементов списка, это помогает React Native выбрать, какой список обновлять при рендеринге длинного списка данных.
9. Используйте VirtualizedList, FlatList и DivisionList для больших наборов данных.
10. Очистите все активные таймеры, что может привести к серьезным проблемам с утечкой памяти.

# Опишите проблему утечки памяти в React Native, как ее можно обнаружить и решить? #

В JavaScript память автоматически управляется сборщиком мусора (GC). Короче говоря, сборщик мусора — это фоновый процесс, который периодически просматривает граф выделенных объектов и их ссылок. Если встречается часть графа, на которую прямо или косвенно не ссылаются корневые объекты (например, переменные в стеке или глобальный объект, такой как окно или навигатор), вся эта часть может быть освобождена из памяти.

В мире React Native каждая область модуля JS прикреплена к корневому объекту. Многие модули, в том числе основные модули React Native, объявляют переменные, которые хранятся в основной области действия (например, когда вы определяете объект вне класса или функции в вашем модуле JS). Такие переменные могут сохранять другие объекты и, следовательно, предотвращать их сбор мусора.

Some Causes of Memory Leak:

1. Unreleased timers/listeners added in componentDidMount
2. Closure scope leaks

Detecting memory leaks for IOS:

In Xcode,

Go to XCode → Product → Profile (⌘ + i)

After that shows you all templates choose leaks.

Detecting memory leaks for Android :

Run React Native app normally (react-native run-android)
Run Android Studio

On the menu,
click Tools → Android → Enable ADB Integration
Click Tools → Android → Android Device Monitor
When Android Device Monitor shows up, click Monitor → Preferences

There is also one more way in Android
Perf Monitor (Performance Monitor) is a good choice to use for android leak monitoring.

```
Import PerfMonitor from 'react-native/Libraries/Performance/RCTRenderingPerf';
PerfMonitor.toggle();
PerfMonitor.start();
setTimeout(() => {
    PerfMonitor.stop();
}, 20000);
```
